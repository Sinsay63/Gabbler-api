openapi: 3.0.3
info:
  title: Modèle de l'api Gabbler en mode rest
  description: Modèle de l'api Gabbler en mode rest
  version: 1.0.0
tags:
  - name: user
    description: Opérations sur les utilisateurs
  - name: gab
    description: Opérations sur les gabs
  - name: doc
    description: Opérations sur le json doc
  - name: auth
    description: Opérations d'authentification
  - name: search
    description: Opérations sur les recherches
paths: { }
components:
  schemas:

    JsonDoc:
      type: string
      description: objet correspondant à la documentation json
      format: json

    User:
      type: object
      description: objet correspondant à un utilisateur
      properties:
        uuid:
          type: string
          description: uuid de l'utilisateur
          example: "9ebd6eff-136f-429a-b946-0fb13a314d42"
        username:
          type: string
          description: pseudonyme de l'utilisateur
          example: "Sinsay"
        firstname:
          type: string
          description: prénom de l'utilisateur
          example: "Yanis"
        lastname:
          type: string
          description: nom de l'utilisateur
          example: "Houdier"
        avatar:
          $ref: "#/components/schemas/Media"
        banner:
          $ref: "#/components/schemas/Media"

    Gab:
      type: object
      description: objet correspondant à un gab
      properties:
        id:
          type: integer
          example: "56"
        content:
          type: string
          description: contenu du gab
          example: "Ratio macron, vive la république!"
        post_date:
          type: string
          description: date de publication du gab
          example: "2023-01-25 18:17:35"
        nbLikes:
          type: integer
          description: nombre de likes du gab
          example: "5"
        nbDislikes:
          type: integer
          description: nombre de dislikes du gab
          example: "2"
        nbComments:
          type: integer
          description: nombre de commentaires du gab
          example: "3"
        medias:
          type: array
          items:
            $ref: "#/components/schemas/Media"
        user:
          $ref: "#/components/schemas/User"


    GabCreation:
      type: object
      description: objet correspondant à un gab pour sa création
      properties:
        content:
          type: string
          description: contenu du gab
          example: "Ratio macron, vive la république!"
        post_date:
          type: string
          description: date de publication du gab
          example: "2023-01-25 18:17:35"
        parent_gab_id:
          type: integer
          description: id du gab parent
          example: "56"
        user_uuid:
          type: string
          description: uuid de l'utilisateur
          example: "9ebd6eff-136f-429a-b946-0fb13a314d42"

    UserToken:
      type: object
      description: objet correspondant à un utilisateur avec son jeton d'authentification
      properties:
        token:
          type: string
          description: jeton d'authentification de l'utilisateur
          example: "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ5YW5pcy5ob3VkaWVyQGdtYWlsLmNvbSIsImV4cCI6MTYyNjQyNjQwN"

    UserAuth:
      type: object
      description: objet correspondant à un utilisateur avec son mot de passe
      properties:
        email:
          type: string
          description: email de l'utilisateur
          example: "yanis.houdier@gmail.com"
        password:
          type: string
          description: mot de passe de l'utilisateur
          example: "123456"

    UserRegister:
      type: object
      description: objet correspondant aux informations d'un utilisateur pour l'inscription
      properties:
        email:
          type: string
          description: email de l'utilisateur
          example: "nom.prenom@gmal.com"
        password:
          type: string
          description: mot de passe de l'utilisateur
          example: "123456"
        username:
          type: string
          description: pseudonyme de l'utilisateur
          example: "Sinsay"
        firstname:
          type: string
          description: prénom de l'utilisateur
          example: "Yanis"
        lastname:
          type: string
          description: nom de l'utilisateur
          example: "Houdier"
        birthday:
          type: string
          description: date d'anniversaire de l'utilisateur
          example: "2001-07-28"

    Media:
      type: object
      description: objet correspondant à un média
      properties:
        id:
          type: integer
          example: "56"
        url:
          type: string
          description: url du média
          example: "https://www.youtube.com/watch?v=QH2-TGUlwu4"
        type:
          type: string
          description: type du média
          example: "avatar"
        date:
          type: string
          description: date de publication du média
          example: "2023-01-25 18:17:35"

    SearchContent:
      type: object
      description: objet correspondant à un contenu de recherche
      properties:
        users:
          items:
            $ref: "#/components/schemas/User"
        gabs:
          items:
            $ref: "#/components/schemas/Gab"

    AccessError:
      type: object
      description: objet correspondant à une erreur d'accès
      properties:
        error:
          description: code de l'erreur
          type: string
          example: "BAD_REQUEST"
        message:
          description: message détaillant l'erreur
          type: string
          example: "La valeur du champ 'text' ne peut pas contenir 'test' !"
        path:
          description: indique le path ayant provoqué cette erreur
          type: string
          example: "/user/9ebd6eff-136f-429a-b946-0fb13a314d42/load"
